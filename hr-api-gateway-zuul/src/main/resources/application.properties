spring.application.name=hr-api-gateway
server.port=8765
server.address=127.0.0.1
spring.main.web-application-type=reactive

# Eureka Client
eureka.client.service-url.defaultZone=http://localhost:8761/eureka
eureka.instance.hostname=localhost
eureka.instance.prefer-ip-address=true
eureka.instance.instance-id=${spring.application.name}:${server.port}
eureka.instance.ip-address=127.0.0.1



# Roteamento para HR-WORKER
spring.cloud.gateway.routes[0].id=hr-worker
spring.cloud.gateway.routes[0].uri=lb://HR-WORKER
spring.cloud.gateway.routes[0].predicates[0]=Path=/hr-worker/**

# Roteamento para HR-PAYROLL
spring.cloud.gateway.routes[1].id=hr-payroll
spring.cloud.gateway.routes[1].uri=lb://HR-PAYROLL
spring.cloud.gateway.routes[1].predicates[0]=Path=/hr-payroll/**

# Ativa descoberta automÃ¡tica via Eureka
spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# CORS (libera tudo para testes)
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS

# Aguarda sincronização inicial com o Eureka antes de liberar o app
eureka.client.fetch-registry=true
eureka.client.registry-fetch-interval-seconds=5
eureka.client.initial-instance-info-replication-interval-seconds=5

# Garante que o Gateway espere o Eureka ficar pronto
spring.cloud.loadbalancer.retry.enabled=true

# Atualiza rotas automaticamente quando novos serviços sobem
spring.cloud.discovery.reactive.enabled=true


# Actuator
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.endpoints.enabled-by-default=true