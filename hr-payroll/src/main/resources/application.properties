spring.cloud.compatibility-verifier.enabled=false
# =============================================
# Application Configuration
# =============================================
spring.application.name=hr-payroll
server.port=8101
server.address=127.0.0.1

# =============================================
# Eureka Client Configuration
# =============================================
eureka.client.service-url.defaultZone=http://localhost:8761/eureka
eureka.instance.hostname=localhost
eureka.instance.prefer-ip-address=true
eureka.instance.instance-id=${spring.application.name}:${server.port}
eureka.instance.ip-address=127.0.0.1

# Lease configuration (heartbeat)
eureka.instance.lease-renewal-interval-in-seconds=5
eureka.instance.lease-expiration-duration-in-seconds=10

# Eureka client settings
eureka.client.registry-fetch-interval-seconds=5
eureka.client.initial-instance-info-replication-interval-seconds=5

# =============================================
# Load Balancer & Timeout Configuration
# =============================================
spring.cloud.loadbalancer.health-check.initial-delay=0s
spring.cloud.loadbalancer.health-check.interval=10s

# Timeout configs (corrigido o formato)
spring.cloud.loadbalancer.connect-timeout=10s
spring.cloud.loadbalancer.read-timeout=20s
spring.cloud.loadbalancer.response-timeout=20s

# =============================================
# Resilience4j Circuit Breaker
# =============================================
resilience4j.circuitbreaker.instances.hr-worker.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.hr-worker.sliding-window-size=10
resilience4j.circuitbreaker.instances.hr-worker.wait-duration-in-open-state=10s
resilience4j.circuitbreaker.instances.hr-worker.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.hr-worker.sliding-window-type=COUNT_BASED

# Retry configuration (opcional)
resilience4j.retry.instances.hr-worker.max-attempts=3
resilience4j.retry.instances.hr-worker.wait-duration=1s

# =============================================
# Actuator & Management
# =============================================
management.endpoints.web.exposure.include=health,info,metrics,circuitbreakers,retries
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.health.circuitbreakers.enabled=true

# Metrics
management.prometheus.metrics.export.enabled=true
management.metrics.enable.http.server.requests=true
management.metrics.enable.jvm=true
management.metrics.enable.system=true

# =============================================
# Database Configuration (exemplo - ajuste conforme seu DB)
# =============================================
# spring.datasource.url=jdbc:postgresql://localhost:5432/hr_payroll
# spring.datasource.username=payroll_user
# spring.datasource.password=payroll_pass
# spring.jpa.hibernate.ddl-auto=update
# spring.jpa.show-sql=true

# =============================================
# Logging Configuration
# =============================================
logging.level.com.dev.hr-payroll=INFO
logging.level.org.springframework.cloud.client=DEBUG
logging.level.com.netflix.eureka=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %highlight(%-5level) - %cyan(%logger{36}) - %msg%n

# =============================================
# Application Specific Properties
# =============================================
app.payroll.calculation.batch-size=100
app.payroll.processing.timeout-minutes=30
app.services.hr-worker.base-url=http://hr-worker:8100